window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),function(a){function b(b){this.opts=a.extend(!0,{},{transformPrefix:e.css+"transform",wiggle:{count:0,factor:50*Math.random()+50,speed:.01+Math.random()/1e3}},b||{}),this.$el=a("<div />").addClass("snow").css({position:"fixed",opacity:this.randomOpacity()}),this.opts.parent.$el.append(this.$el),this.init()}function c(b){this.opts=a.extend(!0,{},{},b||{}),this.el=this.opts.el,this.$el=a(this.el),this.zIndex=this.$el.css("z-index"),this.body=this.getBody(),this.touchCollection=[],this.init()}function d(b){this.opts=a.extend(!0,{},{snow:{dimension:{min:5,max:10},parent:this},$collider:a(".collider"),children:50,maxChildren:200,snowBeginTimer:200},b||{}),this.opts.snow.dimension.max=this.opts.snow.dimension.max-this.opts.snow.dimension.min,this.collection=[],this.colliderCollection=[],this.animationCollection=[],this.$window=a(window),this.$hmtlbody=a("html,body"),this.canremove=!1,this.init()}var e=function(){var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1],c="WebKit|Moz|MS|O".match(new RegExp("("+b+")","i"))[1];return{dom:c,lowercase:b,css:"-"+b+"-",js:b[0].toUpperCase()+b.substr(1)}}();b.prototype={constructor:b,init:function(){this.setDimensions(),this.setZindex(),this.variables()},setDimensions:function(){var a=parseInt(Math.random()*this.opts.dimension.max+this.opts.dimension.min);this.$el.width(a),this.$el.height(a)},setStartPosition:function(){this.startX=this.opts.parent.edges().width*Math.random(),this.y=3*this.$el.height()*-1,this.setZindex(),this.setSpeed()},setZindex:function(){this.zIndex=this.randomZindex(),this.$el.css({"z-index":this.zIndex})},setSpeed:function(){this.speed=2*Math.random()+1},variables:function(){this.x=0,this.y=0,this.wiggle=this.opts.wiggle,this.setStartPosition(),this.translate(this.startX,this.y)},render:function(){this.animate(),this.touch(),this.edge()},animate:function(){this.translate(this.x,this.y)},stop:function(){this.opts.parent.removeFromAnimation(this)},translate:function(a,b){this.opts.transformPrefix;this.$el.css({transform:"translate3D("+a+"px, "+b+"px, 0px)"})},touch:function(){for(var a=0;a<this.opts.parent.colliderCollection.length;a++){var b=this.opts.parent.colliderCollection[a].touch(this);b&&this.stop()}},edge:function(){var a=this.opts.parent.edges();this.wiggle.count+=this.wiggle.speed,this.x=Math.sin(this.wiggle.count)*this.wiggle.factor+this.startX,this.y>a.height?this.setStartPosition():this.y+=this.speed},randomZindex:function(){return(Math.floor(9*Math.random())+1).toString()},randomOpacity:function(){var a=8,b=10;return((Math.floor(Math.random()*(b-a))+a)/10).toString()}},window.Snow=b,c.prototype={constructor:c,init:function(){},bind:function(){this.$el.on("click",a.proxy(this.shake,this))},shake:function(){for(var a=0;a<this.touchCollection.length;a++)this.opts.parent.addToAnimation(this.touchCollection[a]);this.touchCollection=[]},getBody:function(){var a=this.$el.position().top-this.opts.parent.edges().scroll;return{top:a,right:this.$el.position().left+this.$el.width(),bottom:a+1,left:this.$el.position().left}},setBody:function(){this.body=this.getBody()},touch:function(a){return a.y>this.body.top&&a.y<this.body.bottom&&a.x>this.body.left&&a.x<this.body.right&&a.zIndex>=this.zIndex?(this.touchCollection.push(a),!0):!1}},window.SnowCollider=c,d.prototype={constructor:d,init:function(){this.createParent(),this.createSnow(),this.createCollider(),this.bind(),this.start()},createParent:function(){this.$el=a("<div />").addClass("snowStorm"),a("body").append(this.$el)},createSnow:function(){for(var a=0;a<this.opts.children;a++)this.collection.push(new b(this.opts.snow))},createCollider:function(){var a=this;this.opts.$collider.each(function(b,d){a.colliderCollection.push(new c({el:d,parent:a}))})},bind:function(){this.$window.scroll(a.proxy(this.scroll,this))},scroll:function(){this.refreshCollider()},refreshCollider:function(){for(var a=0;a<this.colliderCollection.length;a++)this.colliderCollection[a].shake(),this.colliderCollection[a].setBody()},addSnow:function(){if(!(this.collection.length>=this.opts.maxChildren)){var a=new b(this.opts.snow);this.collection.push(a),this.addToAnimation(a)}},edges:function(){var a=this.$window.scrollTop();return{width:this.$window.width(),height:this.$window.height(),scroll:a>0?a:0}},start:function(){var a=this;this.interval=setInterval(function(){a.animationCollection.push(a.collection[a.animationCollection.length]),a.animationCollection.length===a.collection.length&&(a.canremove=!0,clearInterval(a.interval))},this.opts.snowBeginTimer),this.render()},render:function(){var a=this;requestAnimFrame(function(){a.render()}),a.loop()},loop:function(){for(var a=0;a<this.animationCollection.length;a++)this.animationCollection[a].render()},removeFromAnimation:function(a){this.canremove&&this.removeItem(a)&&this.addSnow()},removeItem:function(a){var b=this.animationCollection.indexOf(a);return b>-1?(this.animationCollection.splice(b,1),!0):!1},addToAnimation:function(a){var b=this.animationCollection.indexOf(a);-1===b&&this.animationCollection.push(a)},snowControl:function(){}},window.SnowStorm=d,a(document).ready(function(){new d})}(jQuery);
//# sourceMappingURL=snow.min.js.map